<mat-card id="contentAddJob" class="z-depth center" flex="50">
  <mat-card-header>
    <mat-card-title><h3>PJ</h3></mat-card-title>
  </mat-card-header>
  <mat-card-content>

<!-- <div [ngSwitch]="state || null"> -->

<div *ngIf="state === 'synced'" class="notification is-success">
  Form is synced with Firestore
</div>

<div *ngIf="state === 'modified'" class="notification is-warning">
  Form has unsaved changes
</div>
<!-- Getting an ERROR Error: ExpressionChangedAfterItHasBeenCheckedError -->
<!-- <div *ngIf="state === 'loading'" class="notification is-info">
  Form data is preloading
</div> -->
<div *ngIf="state === 'error'" class="notification is-danger">
  Form tried and failed to save to Firestore
</div> 
<!-- </div> -->

<hr>



<form [formGroup]="myForm" fireForm path="contacts/test" (stateChange)="changeHandler($event)">

  <div class="columns">
      <div class="column">
          <h3>Reactive Form Data</h3><br> {{ myForm.value | json }}
      </div>
      <div class="column">
          <h3>Firestore Data</h3><br> {{ myDoc | async | json }}
      </div>
  </div>
  <hr>

  <mat-form-field class="full-width">
      <input matInput placeholder="email" formControlName="email">
  </mat-form-field>
  <!-- <mat-form-field class="full-width">
      <mat-select formControlName="career" placeholder="career">
          <mat-option value="Magician">Magician</mat-option>
          <mat-option value="Clown">Clown</mat-option>
          <mat-option value="Juggler">Juggler</mat-option>
      </mat-select>
  </mat-form-field><br>
  <mat-form-field class="full-width">
      <textarea matInput placeholder="your bio" formControlName="bio"></textarea>
  </mat-form-field> -->
  <mat-form-field class="full-width">
      <input matInput placeholder="Job Title" formControlName="jobtitle" name="jobtitle"
              maxlength="120"
              value=""  required>
      <mat-hint align="end">Ex: Software Engineer</mat-hint>
    </mat-form-field>

    <mat-form-field class="full-width">
      <textarea matInput placeholder="Job Description" formControlName="jobdescription" 
      cdkTextareaAutosize #autosize="cdkTextareaAutosize"
        cdkAutosizeMinRows="5" cdkAutosizeMaxRows="10"  required></textarea>
    </mat-form-field>
    <p>{{ myDoc.skillArrayForm | async | json }}</p>
    
    <button mat-raised-button color="primary" type="button" (click)="addSkill()">add</button>
  <hr> Fireform state: {{ state }} <br>
  <hr>

  <button mat-raised-button color="primary" [disabled]="myForm.invalid || state !== 'modified'">Save</button>


</form>

</mat-card-content>
</mat-card>